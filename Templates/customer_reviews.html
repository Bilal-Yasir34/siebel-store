{% extends "base.html" %}
{% block content %}

<!-- Page Heading -->
<div class="bg-gray-100 py-4 border-b border-gray-300">
  <h1 class="text-center text-2xl font-bold text-gray-800">Our Happy Customers</h1>
</div>

<div class="flex flex-col md:flex-row gap-6 px-4 md:px-8 py-6">

  <!-- Rating Card (Left) -->
  <aside class="md:w-1/3 bg-white p-6 rounded shadow">
  <div class="flex items-center gap-4 mb-4">
    <div class="text-5xl font-bold text-gray-800">4.9</div>
    <div>
      <div class="text-black-400 text-xl">★★★★★</div>
      <div class="text-gray-600 text-sm">347 Total Reviews</div>
    </div>
  </div>

  <!-- Rating Bars -->
  <div class="space-y-2 mb-4">
    <div class="flex items-center gap-2">
      <div class="w-4 text-sm">5</div>
      <div class="flex-1 h-2 bg-gray-200 rounded">
        <div class="h-2 bg-black rounded" style="width: 87%"></div>
      </div>
      <div class="w-10 text-right text-sm text-gray-700">231</div>
    </div>

    <div class="flex items-center gap-2">
      <div class="w-4 text-sm">4</div>
      <div class="flex-1 h-2 bg-gray-200 rounded">
        <div class="h-2 bg-gray-700 rounded" style="width: 13%"></div>
      </div>
      <div class="w-10 text-right text-sm text-gray-700">116</div>
    </div>

    <div class="flex items-center gap-2">
      <div class="w-4 text-sm">3</div>
      <div class="flex-1 h-2 bg-gray-200 rounded">
        <div class="h-2 bg-gray-400 rounded" style="width: 0.6%"></div>
      </div>
      <div class="w-10 text-right text-sm text-gray-700">0</div>
    </div>

    <div class="flex items-center gap-2">
      <div class="w-4 text-sm">2</div>
      <div class="flex-1 h-2 bg-gray-200 rounded"></div>
      <div class="w-10 text-right text-sm text-gray-700">0</div>
    </div>

    <div class="flex items-center gap-2">
      <div class="w-4 text-sm">1</div>
      <div class="flex-1 h-2 bg-gray-200 rounded"></div>
      <div class="w-10 text-right text-sm text-gray-700">0</div>
    </div>
  </div>

  <div class="text-lg font-semibold text-gray-800">100% Happy Customers</div>
</aside>


  <!-- Reviews Section (Right) -->
  <div class="flex-1">
    <div id="reviewsContainer" class="space-y-4"></div>

    <!-- Navigation Arrows -->
    <div class="flex justify-center gap-6 mt-6">
      <button id="prevBtn" onclick="changePage(-1)" class="text-2xl text-gray-500 hover:text-gray-700 transition disabled:opacity-30" disabled>&larr;</button>
      <button id="nextBtn" onclick="changePage(1)" class="text-2xl text-gray-500 hover:text-gray-700 transition">&rarr;</button>
    </div>
  </div>

</div>

<script>
// Static Reviews Data
const reviews = [
  {% for i in range(1, 51) %}
  {
    name: "{{ ['Ali', 'Sara', 'Hassan', 'Maya', 'Bilal', 'Zara', 'Usman', 'Anaya', 'Ahmed', 'Mehak', 'Hamza', 'Emaan', 'Ayaan', 'Noor', 'Asad', 'Laiba', 'Areeba', 'Fahad', 'Amna', 'Hiba', 'Taha', 'Nimra', 'Yasir', 'Hania', 'Shayan', 'Iqra', 'Adeel', 'Mishal', 'Sameer', 'Rida'][loop.index0 % 30] }}",
    stars: {{ [5, 4, 5, 3, 4, 5, 5, 4, 3, 5][loop.index0 % 10] }},
    product: "{{ ['RapiWhite Serum', 'AcneStop Face Wash', 'UV Ban Sunblock', 'RapiWhite Cream', 'AcneStop Serum', 'OilRich Body Lotion', 'RapiWhite Full Body Whitening Lotion', 'SunSafe Sunblock', 'RapiWhite Face Wash', 'RapiWhite Whitening Soap', 'SkinTar Anti-Itching Bar', 'Oil Rich Soap', 'Scab Ban Anti-Itching Bar', 'RapiWhite Bundle', 'AcneStop Bundle', 'Ultimate Protection Bundle', 'Face Care Bundle'][loop.index0 % 17] }}",
    comment: "{{ ['Amazing product!', 'Highly recommended.', 'Will buy again!', 'Not bad.', 'Absolutely love it.', 'Good value for money.', 'Fast delivery!', 'Very effective.', 'Exceeded expectations!', 'Five stars!'][loop.index0 % 10] }}"
  },
  {% endfor %}
];

// Pagination
let currentPage = 1;
const reviewsPerPage = 10;
const totalPages = Math.ceil(reviews.length / reviewsPerPage);

function renderReviews() {
  const container = document.getElementById('reviewsContainer');
  container.innerHTML = '';

  const start = (currentPage - 1) * reviewsPerPage;
  const end = start + reviewsPerPage;

  reviews.slice(start, end).forEach(review => {
    const stars = '★'.repeat(review.stars) + '☆'.repeat(5 - review.stars);
    container.innerHTML += `
      <div class="border p-4 rounded shadow-sm bg-white">
        <h3 class="font-bold text-lg mb-1">${review.name}</h3>
        <div class="text-black-400 mb-1 text-xl">${stars}</div>
        <p class="text-gray-600 text-sm mb-1">Product: <span class="font-medium">${review.product}</span></p>
        <p class="text-gray-800">${review.comment}</p>
      </div>
    `;
  });

  document.getElementById('prevBtn').disabled = currentPage === 1;
  document.getElementById('nextBtn').disabled = currentPage === totalPages;
}

function changePage(direction) {
  currentPage += direction;
  renderReviews();
}

// Initialize
renderReviews();
</script>

{% endblock %}
