{% if cart_items %}
  {% for item in cart_items %}
    <div class="flex items-center gap-3 mb-4 border-b pb-3">
      <img src="{{ url_for('static', filename=item.image) }}" alt="{{ item.name }}" class="w-16 h-16 rounded object-cover">
      <div class="flex-1">
        <h3 class="font-semibold text-sm">{{ item.name }}</h3>
        <div class="flex items-center gap-2">
          <span class="text-gray-400 line-through text-sm">Rs. {{ item.before_price }}</span>
          <span class="text-red-500 text-sm font-semibold">Rs. {{ item.price }}</span>
        </div>

        <!-- Quantity Controls -->
        <div class="flex items-center gap-2 mt-2">
          {% set action = 'decrease' if item.quantity > 1 else 'remove' %}
          <button onclick="updateCartQuantity({{ item.id }}, '{{ action }}')" class="px-2 py-1 border rounded bg-gray-100 hover:bg-pink-100">
            {% if item.quantity > 1 %}-{% else %}
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-black inline" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M19 7L5 7M10 11V17M14 11V17M6 7L7 19C7 20.1 7.9 21 9 21H15C16.1 21 17 20.1 17 19L18 7M9 7V5C9 4.45 9.45 4 10 4H14C14.55 4 15 4.45 15 5V7"/>
            </svg>
            {% endif %}
          </button>
          <span class="px-3 border">{{ item.quantity }}</span>
          <button onclick="updateCartQuantity({{ item.id }}, 'increase')" class="px-2 py-1 border rounded bg-gray-100 hover:bg-pink-100">+</button>
        </div>
      </div>
    </div>
  {% endfor %}

  <!-- Subtotal + Shipping + Total Summary -->
  <div id="cartSummary" class="mt-6 border-t pt-4 space-y-2">
    <div class="flex justify-between font-semibold">
      <span>Subtotal:</span>
      <span>Rs. {{ subtotal }}</span>
    </div>
    <div class="flex justify-between font-semibold">
      <span>Shipping:</span>
      <span>
        {% if shipping == 0 %}
          Free
        {% else %}
          Rs. {{ shipping }}
        {% endif %}
      </span>
    </div>
    <div class="flex justify-between font-bold text-lg">
      <span>Total:</span>
      <span>Rs. {{ total }}</span>
    </div>

    <a href="/checkout"
       class="block w-full text-center bg-black text-white py-3 font-semibold border radius 50 hover:bg-pink-300 hover:text-black transition">
      Proceed to Checkout
    </a>
  </div>

{% else %}
  <div class="flex flex-col items-center justify-center h-[calc(100vh-150px)] text-center px-6">
    <!-- Empty cart image -->
    <img src="{{ url_for('static', filename='images/empty-cart.png') }}" alt="Empty Cart" class="w-28 h-28 mb-5 opacity-80">

    <!-- Empty cart message -->
    <p class="text-gray-600 text-base mb-6">Your cart is empty.</p>

    <!-- Return to shop button -->
    <a href="/" class="bg-black text-white py-3 px-8 border radius 50 hover:bg-pink-300 hover:text-black transition font-semibold">Return to Shop</a>
  </div>
{% endif %}
